# Process with autom4te to create an -*- Autotest -*- test suite.

# Note: At runtime the shell script generated from this sources atlocal and
# atconfig, in that order. The atlocal file is generated by configure from
# atlocal.in; the atconfig file is generated by configure, too, but using
# the AC_CONFIG_TESTDIR macro in configure.ac (not using a atconfig.in file
# as the current - June 2008 - autotest docs say). jhrg

# 
# ------------------------------
#

AT_INIT([das-test])
# AT_COPYRIGHT([])

# AT_TESTED([das-test])

# Usage: _AT_TEST_*(<das source>, <baseline file>)

m4_define([_AT_DAS_TEST],   
[AT_BANNER([Test $1 $2])
AT_SETUP([DAS $1])
AT_KEYWORDS([das])
AT_CHECK([$srcdir/das-test -p < $1], [], [stdout], [ignore])
AT_CHECK([diff -b -B $2 stdout], [], [ignore],[],[])
AT_CLEANUP])

m4_define([AT_DAS_RESPONSE_TEST],
[AT_BANNER([DAS response for $1.])
_AT_DAS_TEST([$srcdir/das-testsuite/$1], [$srcdir/das-testsuite/$1.base])
])

AT_DAS_RESPONSE_TEST([bad_value_test.1.das])
