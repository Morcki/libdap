# Process with autom4te to create an -*- Autotest -*- test suite.

# Note: At runtime the shell script generated from this sources atlocal and
# atconfig, in that order. The atlocal file is generated by configure from
# atlocal.in; the atconfig file is generated by configure, too, but using
# the AC_CONFIG_TESTDIR macro in configure.ac (not using a atconfig.in file
# as teh current - June 2008 - autotest docs say). jhrg

m4_define([base_url], [http://test.opendap.org:8080/dods/dts])

# 
# ------------------------------
#

AT_INIT([getdap])
# AT_COPYRIGHT([])

AT_TESTED([getdap])

# Usage: _AT_TEST_*(<data source URL>, <baseline file>)

m4_define([_AT_DAS_TEST],   
[AT_BANNER([Test $1 $2])
AT_SETUP([DAS $1])
AT_KEYWORDS([das])
# Removed: $path_to_exec/../ before 'getdap' here and in the equivalent
# places below. jhrg
AT_CHECK([getdap -a $1], [], [stdout], [ignore])
AT_CHECK([diff -b -B $2 stdout], [], [ignore],[],[])
AT_CLEANUP])

m4_define([_AT_DDS_TEST],
[AT_BANNER([Test $1 $2])
AT_SETUP([DDS $1])
AT_KEYWORDS([dds])
AT_CHECK([getdap -d $1], [], [stdout], [ignore])
AT_CHECK([diff -b -B $2 stdout], [], [ignore])
AT_CLEANUP])

m4_define([_AT_DODS_TEST],
[AT_BANNER([Test $1 $2])
AT_SETUP([DODS $1])
AT_KEYWORDS([expr])
AT_CHECK([getdap -D $1], [], [stdout], [ignore])
AT_CHECK([diff -b -B $2 stdout], [], [ignore])
AT_CLEANUP])

m4_define([AT_DAS_RESPONSE_TEST],
[AT_BANNER([getdap DAS response for $1.])
_AT_DAS_TEST([base_url/$1], [$abs_srcdir/das-testsuite/$1.das])
])

m4_define([AT_DDS_RESPONSE_TEST],
[AT_BANNER([getdap DDS response for $1.])
_AT_DDS_TEST([base_url/$1], [$abs_srcdir/dds-testsuite/$1.dds])
])

m4_define([AT_DODS_RESPONSE_TEST],
[AT_BANNER([getdap Data response for $1.])
_AT_DODS_TEST([base_url/$1], [$abs_srcdir/expr-testsuite/$1.expr])
])

AT_DAS_RESPONSE_TEST([bad_value_test.1])
AT_DAS_RESPONSE_TEST([das])
AT_DAS_RESPONSE_TEST([special.test])
AT_DAS_RESPONSE_TEST([special.test.hdf])
AT_DAS_RESPONSE_TEST([test.1])
AT_DAS_RESPONSE_TEST([test.11])
AT_DAS_RESPONSE_TEST([test.12])
AT_DAS_RESPONSE_TEST([test.13])
AT_DAS_RESPONSE_TEST([test.14])
AT_DAS_RESPONSE_TEST([test.15])
AT_DAS_RESPONSE_TEST([test.16])
AT_DAS_RESPONSE_TEST([test.17])
AT_DAS_RESPONSE_TEST([test.18])
AT_DAS_RESPONSE_TEST([test.19])
AT_DAS_RESPONSE_TEST([test.1a])
AT_DAS_RESPONSE_TEST([test.2])
AT_DAS_RESPONSE_TEST([test.20])
AT_DAS_RESPONSE_TEST([test.21])
AT_DAS_RESPONSE_TEST([test.22])
AT_DAS_RESPONSE_TEST([test.23])
AT_DAS_RESPONSE_TEST([test.24])
AT_DAS_RESPONSE_TEST([test.25])
AT_DAS_RESPONSE_TEST([test.26])
AT_DAS_RESPONSE_TEST([test.27])
AT_DAS_RESPONSE_TEST([test.28])
AT_DAS_RESPONSE_TEST([test.29])
AT_DAS_RESPONSE_TEST([test.3])
AT_DAS_RESPONSE_TEST([test.3.Z])
AT_DAS_RESPONSE_TEST([test.30])
AT_DAS_RESPONSE_TEST([test.31])
AT_DAS_RESPONSE_TEST([test.32])
AT_DAS_RESPONSE_TEST([test.33])
AT_DAS_RESPONSE_TEST([test.34])
AT_DAS_RESPONSE_TEST([test.4])
AT_DAS_RESPONSE_TEST([test.5])
AT_DAS_RESPONSE_TEST([test.6])
AT_DAS_RESPONSE_TEST([test.7])
AT_DAS_RESPONSE_TEST([test.8])
AT_DAS_RESPONSE_TEST([test.9])

AT_DDS_RESPONSE_TEST([3B42.980909.5.hacked.HDF.das])
AT_DDS_RESPONSE_TEST([3B42.980909.5.HDF.das])
AT_DDS_RESPONSE_TEST([3B42.980909.5.HDF])
AT_DDS_RESPONSE_TEST([AsciiOutputTest1])
AT_DDS_RESPONSE_TEST([fnoc1.nc.das])
AT_DDS_RESPONSE_TEST([fnoc1.nc])
AT_DDS_RESPONSE_TEST([S2000415.HDF.das])
AT_DDS_RESPONSE_TEST([S2000415.HDF])
AT_DDS_RESPONSE_TEST([test.1])
AT_DDS_RESPONSE_TEST([test.10])
AT_DDS_RESPONSE_TEST([test.11])
AT_DDS_RESPONSE_TEST([test.12])
AT_DDS_RESPONSE_TEST([test.13])
AT_DDS_RESPONSE_TEST([test.14])
AT_DDS_RESPONSE_TEST([test.15])
AT_DDS_RESPONSE_TEST([test.16])
AT_DDS_RESPONSE_TEST([test.17])
AT_DDS_RESPONSE_TEST([test.18])
AT_DDS_RESPONSE_TEST([test.19])
AT_DDS_RESPONSE_TEST([test.19b.das])
AT_DDS_RESPONSE_TEST([test.19b])
AT_DDS_RESPONSE_TEST([test.2])
AT_DDS_RESPONSE_TEST([test.20])
AT_DDS_RESPONSE_TEST([test.3])
AT_DDS_RESPONSE_TEST([test.4])
AT_DDS_RESPONSE_TEST([test.6])
AT_DDS_RESPONSE_TEST([test.7])
AT_DDS_RESPONSE_TEST([test.8])
AT_DDS_RESPONSE_TEST([test.9])


AT_DODS_RESPONSE_TEST([data.61a])
AT_DODS_RESPONSE_TEST([data.61b])
AT_DODS_RESPONSE_TEST([data.61c])
AT_DODS_RESPONSE_TEST([data.61d])
AT_DODS_RESPONSE_TEST([data.z0])
AT_DODS_RESPONSE_TEST([data.z1])
AT_DODS_RESPONSE_TEST([data.z2])
AT_DODS_RESPONSE_TEST([data.z3])
AT_DODS_RESPONSE_TEST([data.z4])
AT_DODS_RESPONSE_TEST([data.z5])
AT_DODS_RESPONSE_TEST([data.z6])
AT_DODS_RESPONSE_TEST([data.z7])
AT_DODS_RESPONSE_TEST([data.zz0])
AT_DODS_RESPONSE_TEST([data.zz1])
AT_DODS_RESPONSE_TEST([data.zz2])
AT_DODS_RESPONSE_TEST([test.1])
AT_DODS_RESPONSE_TEST([test.2])
AT_DODS_RESPONSE_TEST([test.2a])
AT_DODS_RESPONSE_TEST([test.3])
AT_DODS_RESPONSE_TEST([test.4])
AT_DODS_RESPONSE_TEST([test.5])
AT_DODS_RESPONSE_TEST([test.6])
AT_DODS_RESPONSE_TEST([test.61])
AT_DODS_RESPONSE_TEST([test.7])
AT_DODS_RESPONSE_TEST([test.8])
AT_DODS_RESPONSE_TEST([test.9])
AT_DODS_RESPONSE_TEST([test.a])
AT_DODS_RESPONSE_TEST([test.b])
AT_DODS_RESPONSE_TEST([test.c0])
AT_DODS_RESPONSE_TEST([test.c1])
AT_DODS_RESPONSE_TEST([test.c2])
AT_DODS_RESPONSE_TEST([test.c3])
AT_DODS_RESPONSE_TEST([test.c4])
AT_DODS_RESPONSE_TEST([test.cc0])
AT_DODS_RESPONSE_TEST([test.cc1])
AT_DODS_RESPONSE_TEST([test.d])
